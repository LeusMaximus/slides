# Единый AST чтобы править всеми

# Казусы популярных форматов

- какие проблемы есть у XML, JSON, YAML, INI, TOML
- какие фичи мы потеряли

# Минификация JSON

	{
		"users" : [
			{
				"name" : "Alice" ,
				"age" : 20
			}
		]
	}

	// -30% size -100% readability
	{"users":[{"name":"Alice",age:20}]}

# Минификация XML

	<users>
		<user>
			<name>Alice</name>
			<age>20</age>
		</user>
	</users>

	<!-- -13% size -100% readability -->
	<users><user><name>Alice</name><age>20</age></user></users>

# Минификация Tree

|                  | XML  | JSON     | YAML | INI  | Tree     | 
|------------------|------|----------|------|------|----------|
| Читаемый         | 196% | 140%     | 124% | 108% | **100%** |
| Минифицированный | 172% | **100%** | -    | -    | -        |

[файлы](https://github.com/nin-jin/tree.d/tree/master/formats)

# Экранирование в XML

	foo > 0 & foo < 10

	<code>foo &gt; 0 &amp; foo &lt; 10</code>

# Экранирование в JSON

	/"[\s\S]*"/

	"\"[\\s\\S]*\""

# Экранирование в YAML

- 5 типов строк
- 4 модификатора обработки пробелов

# Экранирование в Tree

> Нет

# Холивары

- Табы или пробемы?
- 2 или 4 символа?
- возврат каретки?
- выравнивание?
- правила линтера?
- правила форматтера?

# Сложность синтаксиса

| Формат | Число паттернов |
|--------|-----------------|
| XML    | 90              |
| JSON   | 30              |
| YAML   | 210             |
| INI    | 8               |
| Tree   | 10              |

# JSON AST



# Подробности по реализации

- координаты ошибки
- 